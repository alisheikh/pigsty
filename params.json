{"name":"Pigsty","tagline":"Pigsty is very efficient and customizable spooler for the unified2 file format.","body":"# Pigsty\r\n\r\nPigsty is designed as a replacement for Barnyard2.  It's written in Javascript\r\nusing Node.js.\r\n\r\n## Why?\r\n\r\nWe wanted something that was a little more extensible than Barnyard2. Thus, Pigsty was born.\r\n\r\nPigsty's output architecture is plugin based.  You must install Pigsty, then install\r\nand configure any output plugins. you need.\r\n\r\n## Installation\r\n\r\n### Requirements\r\n\r\nPigsty requires libpcap (`apt get install libpcap-dev` on ubuntu).\r\nYou also need to install node.js for your platform.  We recommend v.10.x.\r\nInstructions for doing so are here: https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager\r\n\r\n### Ordinary people\r\n\r\n    $ install node.js for your platform\r\n    $ npm install pigsty -g\r\n    $ sudo pigsty setup\r\n    $ <edit /etc/pigsty/pigsty.config.js>\r\n    $ npm install pigsty-<pluginname> -g   # repeat for any plugins you need\r\n    $ pigsty                               # run pigsty!\r\n\r\n### For developers\r\n\r\n    $ install node.js for your platform\r\n    $ git clone git@github.com:threatstack/pigsty.git\r\n    $ cd ./pigsty && npm install\r\n    $ pigsty setup                         # setup your config. \r\n    $ ./bin/pigsty \r\n\r\n## Output Plugins\r\n\r\nCurrently, the following plugins are available:\r\n\r\n* [pigsty-mysql](https://github.com/threatstack/pigsty-mysql) - MySQL output for Snort ACID schema\r\n* [pigsty-websocket](https://github.com/threatstack/pigsty-websocket) - Websocket example output \r\n* [pigsty-mongodb](https://github.com/threatstack/pigsty-websocket) - MongoDB example output\r\n\r\nTo install, type `npm install <plugin> -g`, e.g. `npm install pigsty-mysql -g`\r\n\r\n## Usage\r\n\r\n```\r\n\t       ,.\r\n\t      (_|,.\r\n\t     ,' /, )_______   _\r\n\t  __j o``-'        `.'-)'\r\n\t (\")                 '\r\n\t  `-j                |\r\n\t    `-._(           /\r\n\t       |_  |--^.  /\r\n\t      /_]'|_| /_)_/\r\n\t         /_]'  /_]'\r\n\t         \r\n\tPigsty by Threat Stack, Inc\r\n\thttps://www.threatstack.com\r\n\r\n\r\n   Usage: pigsty [-options]\r\n\r\n\t -c, --config     Pigsty configuration file. Default path: /etc/pigsty.config.js\r\n\t -D, --daemon     Run Pigsty in daemon mode.\r\n\t     --validate   Check your Pigsty configuration file for errors.\r\n\t -V, --verbose    Turn on verbose logging.\r\n\t -v, --version    Application version.\r\n\t -h, --help       Application usage.\r\n\r\n   Sensor Information:\r\n\t -n, --name       Sensor name.\r\n\t -i, --interface  Sensor interface.\r\n\r\n   Log Configurations\r\n\t -d, --dir        Log directory.\r\n\t -m, --match      Logs file must match express to be processed.\r\n\t -M, --mode       Processing mode (continuous|read). Default: continuous\r\n\t -b, --bookmark   Bookmark file path.\r\n\r\n   References:\r\n\t -R, --reference        Reference file.\r\n\t -C, --classification   Classification file.\r\n\t -G, --gen-msg          Gen-msg.map file.\r\n\t -S, --sid-msg          Sid-msg.map file.\r\n\r\n\t Example: pigsty -i en1 -n \"Pigsty\" -d /logs/ -m unified2.alert.* -c ~/pigsty.config.js -D\r\n```\r\n\r\n## Performance\r\n\r\nCurrently, the unified2 spooler reads at about 7000eps. Running w/ the pigsty-mysql\r\noutput plugin, you'll get ~1000eps.  This should be more than adequate for \r\nmost installations, but we're actively working to make this faster.\r\n\r\n## Contributing\r\n\r\n### Plugins\r\n\r\nTo write your own output plugin, please refer to: https://github.com/threatstack/pigsty-example-plugin\r\n\r\nFull documentation on writing plugins coming soon.\r\n\r\n### Issues \r\n\r\n#### FAQ\r\n\r\n##### Q. Can't install; `npm install pigsty -g` is reporting pcap errors:\r\n\r\n```\r\nmake: Entering directory `/usr/lib/node_modules/pigsty/node_modules/unified2/node_modules/pcap/build'\r\n  CXX(target) Release/obj.target/pcap_binding/pcap_binding.o\r\n../pcap_binding.cc:5:23: fatal error: pcap/pcap.h: No such file or directory\r\ncompilation terminated.\r\nmake: *** [Release/obj.target/pcap_binding/pcap_binding.o] Error 1\r\nmake: Leaving directory `/usr/lib/node_modules/pigsty/node_modules/unified2/node_modules/pcap/build'\r\ngyp ERR! build error\r\ngyp ERR! stack Error: `make` failed with exit code: 2\r\ngyp ERR! stack     at ChildProcess.onExit (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:267:23)\r\ngyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:98:17)\r\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:789:12)\r\ngyp ERR! System Linux 3.5.0-17-generic\r\n  SOLINK_MODULE(target) Release/obj.target/binding.node\r\n```\r\n\r\nA. Make sure you install libpcap\r\n\r\n\r\n##### Q. I installed pigsty using `npm install pigsty -g` but I don't have the pigsty binary\r\n\r\nA.  Usually, it will get symlinked to /usr/bin.  Depending on your platform, npm bin/ path is probably not in your path.  \r\nYou can look for it using `find / -name \"pigsty\"`.\r\n\r\n\r\n#### Reporting\r\n\r\nUse the git issues, or send an email to support@threatstack.com\r\n\r\n## License\r\n\r\nCopyright (C) 2013 Threat Stack, Inc (https://www.threatstack.com)\r\n\r\nThis program is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nThis program is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU General Public License for more details.\r\n\r\nYou should have received a copy of the GNU General Public License\r\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}