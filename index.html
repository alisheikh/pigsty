<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Pigsty by threatstack</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Pigsty</h1>
        <h2>Pigsty is very efficient and customizable spooler for the unified2 file format.</h2>
        <a href="https://github.com/threatstack/pigsty" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="pigsty" class="anchor" href="#pigsty"><span class="octicon octicon-link"></span></a>Pigsty</h1>

<p>Pigsty is designed as a replacement for Barnyard2.  It's written in Javascript
using Node.js.</p>

<h2>
<a name="why" class="anchor" href="#why"><span class="octicon octicon-link"></span></a>Why?</h2>

<p>We wanted something that was a little more extensible than Barnyard2. Thus, Pigsty was born.</p>

<p>Pigsty's output architecture is plugin based.  You must install Pigsty, then install
and configure any output plugins. you need.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h3>

<p>Pigsty requires libpcap (<code>apt get install libpcap-dev</code> on ubuntu).
You also need to install node.js for your platform.  We recommend v.10.x.
Instructions for doing so are here: <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager</a></p>

<h3>
<a name="ordinary-people" class="anchor" href="#ordinary-people"><span class="octicon octicon-link"></span></a>Ordinary people</h3>

<pre><code>$ install node.js for your platform
$ npm install pigsty -g
$ sudo pigsty setup
$ &lt;edit /etc/pigsty/pigsty.config.js&gt;
$ npm install pigsty-&lt;pluginname&gt; -g   # repeat for any plugins you need
$ pigsty                               # run pigsty!
</code></pre>

<h3>
<a name="for-developers" class="anchor" href="#for-developers"><span class="octicon octicon-link"></span></a>For developers</h3>

<pre><code>$ install node.js for your platform
$ git clone git@github.com:threatstack/pigsty.git
$ cd ./pigsty &amp;&amp; npm install
$ pigsty setup                         # setup your config. 
$ ./bin/pigsty 
</code></pre>

<h2>
<a name="output-plugins" class="anchor" href="#output-plugins"><span class="octicon octicon-link"></span></a>Output Plugins</h2>

<p>Currently, the following plugins are available:</p>

<ul>
<li>
<a href="https://github.com/threatstack/pigsty-mysql">pigsty-mysql</a> - MySQL output for Snort ACID schema</li>
<li>
<a href="https://github.com/threatstack/pigsty-sguil">pigsty-sguil</a> - Sends output to sguild </li>
<li>
<a href="https://github.com/threatstack/pigsty-websocket">pigsty-websocket</a> - Websocket output plugin </li>
<li>
<a href="https://github.com/threatstack/pigsty-websocket">pigsty-mongodb</a> - MongoDB output plugin</li>
<li>
<a href="https://github.com/threatstack/pigsty-syslog">pigsty-syslog</a> - Syslog output plugin</li>
<li>
<a href="https://github.com/threatstack/pigsty-irc">pigsty-irc</a> - IRC output plugin</li>
<li>
<a href="https://github.com/threatstack/pigsty-rest">pigsty-rest</a> - Rest output plugin by <a href="https://github.com/larsx2">larsx</a> (Eduardo Urias)</li>
</ul><p>To install, type <code>npm install &lt;plugin&gt; -g</code>, e.g. <code>npm install pigsty-mysql -g</code></p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<pre><code>           ,.
          (_|,.
         ,' /, )_______   _
      __j o``-'        `.'-)'
     (")                 '
      `-j                |
        `-._(           /
           |_  |--^.  /
          /_]'|_| /_)_/
             /_]'  /_]'

    Pigsty by Threat Stack, Inc
    https://www.threatstack.com


   Usage: pigsty [-options]

     -c, --config     Pigsty configuration file. Default path: /etc/pigsty.config.js
     -D, --daemon     Run Pigsty in daemon mode.
         --validate   Check your Pigsty configuration file for errors.
     -V, --verbose    Turn on verbose logging.
     -v, --version    Application version.
     -h, --help       Application usage.

   Sensor Information:
     -n, --name       Sensor name.
     -i, --interface  Sensor interface.

   Log Configurations
     -d, --dir        Log directory.
     -m, --match      Logs file must match express to be processed.
     -M, --mode       Processing mode (continuous|read). Default: continuous
     -b, --bookmark   Bookmark file path.

   References:
     -R, --reference        Reference file.
     -C, --classification   Classification file.
     -G, --gen-msg          Gen-msg.map file.
     -S, --sid-msg          Sid-msg.map file.

     Example: pigsty -i en1 -n "Pigsty" -d /logs/ -m unified2.alert.* -c ~/pigsty.config.js -D
</code></pre>

<h2>
<a name="performance" class="anchor" href="#performance"><span class="octicon octicon-link"></span></a>Performance</h2>

<p>Currently, the unified2 spooler reads at about 7000eps. Running w/ the pigsty-mysql
output plugin, you'll get ~1000eps.  This should be more than adequate for 
most installations, but we're actively working to make this faster.</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<h3>
<a name="plugins" class="anchor" href="#plugins"><span class="octicon octicon-link"></span></a>Plugins</h3>

<p>To write your own output plugin, please refer to: <a href="https://github.com/threatstack/pigsty-example-plugin">https://github.com/threatstack/pigsty-example-plugin</a></p>

<p>Full documentation on writing plugins coming soon.</p>

<h3>
<a name="issues" class="anchor" href="#issues"><span class="octicon octicon-link"></span></a>Issues</h3>

<h4>
<a name="faq" class="anchor" href="#faq"><span class="octicon octicon-link"></span></a>FAQ</h4>

<h5>
<a name="q-cant-install-npm-install-pigsty--g-is-reporting-pcap-errors" class="anchor" href="#q-cant-install-npm-install-pigsty--g-is-reporting-pcap-errors"><span class="octicon octicon-link"></span></a>Q. Can't install; <code>npm install pigsty -g</code> is reporting pcap errors:</h5>

<pre><code>make: Entering directory `/usr/lib/node_modules/pigsty/node_modules/unified2/node_modules/pcap/build'
  CXX(target) Release/obj.target/pcap_binding/pcap_binding.o
../pcap_binding.cc:5:23: fatal error: pcap/pcap.h: No such file or directory
compilation terminated.
make: *** [Release/obj.target/pcap_binding/pcap_binding.o] Error 1
make: Leaving directory `/usr/lib/node_modules/pigsty/node_modules/unified2/node_modules/pcap/build'
gyp ERR! build error
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:267:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:98:17)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:789:12)
gyp ERR! System Linux 3.5.0-17-generic
  SOLINK_MODULE(target) Release/obj.target/binding.node
</code></pre>

<p>A. Make sure you install libpcap</p>

<h5>
<a name="q-i-installed-pigsty-using-npm-install-pigsty--g-but-i-dont-have-the-pigsty-binary" class="anchor" href="#q-i-installed-pigsty-using-npm-install-pigsty--g-but-i-dont-have-the-pigsty-binary"><span class="octicon octicon-link"></span></a>Q. I installed pigsty using <code>npm install pigsty -g</code> but I don't have the pigsty binary</h5>

<p>A.  Usually, it will get symlinked to /usr/bin.  Depending on your platform, npm bin/ path is probably not in your path.<br>
You can look for it using <code>find / -name "pigsty"</code>.</p>

<h4>
<a name="reporting" class="anchor" href="#reporting"><span class="octicon octicon-link"></span></a>Reporting</h4>

<p>Use the git issues, or send an email to <a href="mailto:support@threatstack.com">support@threatstack.com</a></p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (C) 2013 Threat Stack, Inc (<a href="https://www.threatstack.com">https://www.threatstack.com</a>)</p>

<p>This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.</p>

<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License
along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/threatstack/pigsty/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/threatstack/pigsty/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/threatstack/pigsty"></a> is maintained by <a href="https://github.com/threatstack">threatstack</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>